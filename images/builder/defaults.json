{
  "steps": ["build", "lint", "test"],
  "build": {
    "steps": [
      "[ -f package.json ] && npm ci || true",
      "copy-assets ${CONFIG:-project.json}",
      "cd ${HUGO_SOURCE:-.} && hugo --minify --environment ${ENVIRONMENT:-production} ${BASEURL:+--baseURL $BASEURL}"
    ]
  },
  "lint": {
    "steps": [
      "htmlhint --config $([ -f .htmlhintrc ] && echo .htmlhintrc || echo /builder/.htmlhintrc) ${HUGO_SOURCE:-.}/${OUTPUT:-public}/**/*.html || true"
    ]
  },
  "test": {
    "steps": []
  },
  "output": "public"
}
